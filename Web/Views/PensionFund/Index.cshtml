@using Auctus.Model
@model PensionFundInfo

@Html.Partial("_Header", Model?.ContractAddress)
@Html.Partial("_Timeline", 0)
@Html.Partial("_FundSummary", Model?.PensionFundName)
@Html.Partial("_Charts")

@Html.Partial("_TransactionHistory")

@Html.Partial("_Withdraw")
@Html.Partial("_Payment")

@section style{
    <link rel=stylesheet href="~/css/dashboard.css">
    <link href="~/lib/c3/c3.min.css" rel="stylesheet">
    <link rel=stylesheet href="~/lib/noUiSlider/nouislider.min.css">
}

@section scripts{
    <script type="text/javascript">
        var urlGenerateWithdraw = '@Url.Action("GenerateWithdrawal", "PensionFund")';
        var urlGeneratePayment = '@Url.Action("GeneratePayment", "PensionFund")';
        var urlGetPaymentInfo = '@Url.Action("GetWithdrawalInfo", "PensionFund")';
        var urlReadPayment = '@Url.Action("ReadPayments", "PensionFund")';
        var urlReadWithdraw = '@Url.Action("ReadWithdrawal", "PensionFund")';
        var pensionFundData = JSON.parse('@Html.Raw(Json.Serialize(Model))');


      
    </script>
    <script src="~/lib/d3/d3.min.js" charset="utf-8"></script>
    <script src="~/lib/c3/c3.min.js"></script>
    <script type="text/javascript" src="~/js/dashboard/main.js"></script>
    <script type="text/javascript" src="~/js/dashboard/charts.js"></script>
    <script type="text/javascript" src="~/lib/noUiSlider/nouislider.min.js"></script>
    <script>
       //TODO: MIGRATE TO JS
        c3.generate({
            bindto: '#valuesChart',
            padding: {
                top: 30,
                right: 10,
                bottom: 0,
                left: 50,
            },
            data: {
                x: 'x',
                columns: [
                    ['x', '2010-01-01', '2011-01-01', '2012-01-01', '2013-01-01', '2014-01-01', '2015-01-01'],
                    ['TOTAL VALUE', 0, 100, 200, 300, 400, 500],
                    ['TOTAL VESTED', 0, 60, 130, 155, 240, 260],
                    ['TOTAL INVESTED', 0, 50, 100, 150, 200, 250]
                ]
            },
            color: {
                pattern: ['#0be6d0', '#00bdff', '#0243b7']
            },
            axis: {
                y: {
                    tick: {
                        count: 5,
                        format: function (d) { return "$ " + d; }
                    }
                },
                x: {
                    type: 'timeseries',
                    tick: {
                        format: function (x) { return x.getFullYear(); }
                        //format: '%Y' // format string is also available for timeseries data
                    }
                }
            },
            grid: {
                y: {
                    show: true
                },
            }
        });
    </script>
}   
